"use strict";var KTDatatablesServerSide=function(){var n,u;const t="/requests";const f=document.getElementById("info_modal");f.addEventListener("hidden.bs.modal",function(){n.draw()});var e=function(){n=$("#kt_datatable_example_1").DataTable({ordering:!1,ajax:{method:"post",url:`${t}/getdata`,data:function(n){n.userId=KTUtil.getURLParam("userId")}},columns:[{data:"id",render:function(n){return`<code>#${n}</code>`}},{data:"status",render:function(n){return`<span class="badge badge-${chatWithExpertRequestStatus[n]["class"]}">${chatWithExpertRequestStatus[n].title}</span>`}},{data:"user"},{data:"sessionFee",render:function(n){return`<span">${KTUtil.numberString(n)}<small> ت</small></span>`}},{data:"description"},{data:"updatedAt",render:function(n){return`<span class="badge badge-dark">`+n.ToPersianDateString()+`</span>`}},{data:"id",orderable:!1,className:"text-end",render:function(n,t,i){let r='<div class="btn-group btn-group-sm px-2">';return i.status==0&&(r+=`<button class="btn btn-sm btn-icon btn-light-success" data-kt-docs-table-action="accept_row" data-bs-toggle="tooltip" title="تایید" data-id="${n}"><i class="bi bi-check"></i></button>`,r+=`<button class="btn btn-sm btn-icon btn-light-danger" data-kt-docs-table-action="reject_row" data-bs-toggle="tooltip" title="رد" data-id="${n}"><i class="bi bi-trash"></i></button>`),r+"<\/div>"}},],createdRow:function(){}});u=n.$;n.on("draw",function(){r();KTMenu.createInstances();KTApp.initBootstrapTooltips()})},i=function(){const t=document.querySelector('[data-kt-docs-table-filter="search"]');t.addEventListener("keyup",function(t){n.search(t.target.value).draw()})},r=()=>{const i=document.querySelectorAll('[data-kt-docs-table-action="reject_row"]'),r=document.querySelectorAll('[data-kt-docs-table-action="accept_row"]');i.forEach(i=>{i.addEventListener("click",function(i){i.preventDefault();let r=i.target.closest("button").dataset.id;SwalConfirm.fire().then(function(i){i.value&&fetch(`${t}/reject/${r}`).then(n=>n.json()).then(t=>{t.status==1?(toastr.success(t.message),n.draw()):toastr.error(t.message)}).catch(()=>toastr.error("خطای سرور"))})})});r.forEach(i=>{i.addEventListener("click",function(i){i.preventDefault();let r=i.target.closest("button").dataset.id;SwalConfirm.fire().then(function(i){i.value&&fetch(`${t}/accept/${r}`).then(n=>n.json()).then(t=>{t.status==1?(toastr.success(t.message),n.draw()):toastr.error(t.message)}).catch(()=>toastr.error("خطای سرور"))})})})};return{init:function(){e();i();r();i()}}}();KTUtil.onDOMContentLoaded(function(){KTDatatablesServerSide.init()});